{"openapi":"3.0.1","info":{"title":"SKT Portal Sample API","description":"SSO 예시를 포함하는 Portal Sample 입니다","version":"0.1"},"servers":[{"url":"http://localhost:8080/portal","description":"Generated server url"}],"tags":[{"name":"System","description":"시스템 관리 API. 시스템은 SSO 연계 대상 시스템을 의미한다. 시스템을 추가한다고 하여 바로 SSO 연계가 되는 것은 아니며, 시스템과 역할, 권한 관계를 설정해야 한다"},{"name":"조직(ACP 서비스와 Mapping) 관리","description":"조직 관리 API. 조직을 관리하는 API"},{"name":"Role","description":"역할 관리 API. 시스템과 역할, 권한 관계를 설정하는 API"},{"name":"User","description":"사용자 관리 API"},{"name":"인증관리","description":"인증 관리 API"},{"name":"View Controller","description":"View 를 Resolve 하는 목적의 Controller"}],"paths":{"/api/v1/system/{systemId}":{"put":{"tags":["System"],"summary":"시스템 수정","description":"시스템 정보를 수정한다","operationId":"updateSystem","parameters":[{"name":"systemId","in":"path","description":"시스템 ID","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"systemDto","in":"query","description":"시스템 정보","required":true,"schema":{"$ref":"#/components/schemas/SystemDto"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SystemDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1SystemDto"}}}}}},"delete":{"tags":["System"],"summary":"시스템 삭제","description":"시스템을 삭제한다","operationId":"deleteSystem","parameters":[{"name":"systemId","in":"path","description":"시스템 ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1"}}}}}}},"/api/v1/system/{systemId}/auth/{systemAuthId}":{"put":{"tags":["System"],"summary":"시스템 권한 수정","description":"시스템 권한 정보를 수정한다","operationId":"updateSystemAuth","parameters":[{"name":"systemId","in":"path","description":"시스템 ID","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"systemAuthId","in":"path","description":"시스템 권한 ID","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"systemAuthDto","in":"query","description":"시스템 권한 정보","required":true,"schema":{"$ref":"#/components/schemas/SystemAuthDto"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SystemAuthDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1SystemAuthDto"}}}}}},"delete":{"tags":["System"],"summary":"시스템 권한 삭제","description":"시스템 권한을 삭제한다","operationId":"deleteSystemAuth","parameters":[{"name":"systemId","in":"path","description":"시스템 ID","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"systemAuthId","in":"path","description":"시스템 권한 ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1"}}}}}}},"/api/v1/role/{roleId}":{"get":{"tags":["Role"],"summary":"역할 조회","description":"역할을 조회한다","operationId":"getRole","parameters":[{"name":"roleId","in":"path","description":"역할 ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1RoleDto"}}}}}},"put":{"tags":["Role"],"summary":"역할 수정","description":"역할을 수정한다","operationId":"updateRole","parameters":[{"name":"roleId","in":"path","description":"역할 ID","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"roleDto","in":"query","description":"역할 정보","required":true,"schema":{"$ref":"#/components/schemas/RoleDto"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1RoleDto"}}}}}},"delete":{"tags":["Role"],"summary":"역할 삭제","description":"역할을 삭제한다","operationId":"deleteRole","parameters":[{"name":"roleId","in":"path","description":"역할 ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1"}}}}}}},"/api/v1/org/{orgId}":{"put":{"tags":["조직(ACP 서비스와 Mapping) 관리"],"summary":"조직 수정","description":"조직을 수정한다","operationId":"updateOrg","parameters":[{"name":"orgId","in":"path","description":"조직 ID","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"orgDto","in":"query","description":"조직 정보","required":true,"schema":{"$ref":"#/components/schemas/OrgDto"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrgDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1OrgDto"}}}}}},"delete":{"tags":["조직(ACP 서비스와 Mapping) 관리"],"operationId":"deleteOrg","parameters":[{"name":"orgId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1"}}}}}}},"/api/v1/org/sync-acp":{"put":{"tags":["조직(ACP 서비스와 Mapping) 관리"],"operationId":"syncAcpServices","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1ListOrgDto"}}}}}}},"/api/v1/user":{"get":{"tags":["User"],"summary":"사용자 목록 조회","description":"사용자 목록을 조회한다","operationId":"getAllUser","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1ListUserDto"}}}}}},"post":{"tags":["User"],"summary":"사용자 추가","description":"사용자를 추가한다","operationId":"addUser","parameters":[{"name":"userDto","in":"query","description":"사용자 정보","required":true,"schema":{"$ref":"#/components/schemas/UserDto"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1UserDto"}}}}}}},"/api/v1/system":{"get":{"tags":["System"],"summary":"시스템 목록 조회","description":"시스템 목록을 조회한다","operationId":"getSystems","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1ListSystemDto"}}}}}},"post":{"tags":["System"],"summary":"시스템 추가","description":"SSO 연계 대상 시스템을 추가한다. 추가된 시스템은 역할과 권한 관계에 의해 좌측 메뉴에 표시된다","operationId":"addSystem","parameters":[{"name":"systemDto","in":"query","description":"시스템 정보","required":true,"schema":{"$ref":"#/components/schemas/SystemDto"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SystemDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1System"}}}}}}},"/api/v1/system/{systemId}/auth":{"post":{"tags":["System"],"summary":"시스템 권한 추가","description":"시스템에 권한을 추가한다","operationId":"addSystemAuth","parameters":[{"name":"systemId","in":"path","description":"시스템 ID","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"systemAuthDto","in":"query","description":"시스템 권한 정보","required":true,"schema":{"$ref":"#/components/schemas/SystemAuthDto"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SystemAuthDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1SystemAuthDto"}}}}}}},"/api/v1/role":{"get":{"tags":["Role"],"summary":"역할 목록 조회","description":"역할 목록을 조회한다","operationId":"getRoles","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1ListRoleDto"}}}}}},"post":{"tags":["Role"],"summary":"역할 추가","description":"역할을 추가한다","operationId":"addRole","parameters":[{"name":"roleDto","in":"query","description":"역할 정보","required":true,"schema":{"$ref":"#/components/schemas/RoleDto"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1RoleDto"}}}}}}},"/api/v1/org":{"get":{"tags":["조직(ACP 서비스와 Mapping) 관리"],"operationId":"getOrg","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1ListOrgDto"}}}}}},"post":{"tags":["조직(ACP 서비스와 Mapping) 관리"],"summary":"조직 추가","description":"조직을 추가한다","operationId":"addOrg","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrgDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1OrgDto"}}}}}}},"/api/v1/auth":{"patch":{"tags":["인증관리"],"summary":"JWT 토큰 갱신","description":"JWT 토큰의 만료 기한을 갱신한다","operationId":"updateJwtToken","parameters":[{"name":"updateTokenDto","in":"query","description":"토큰 갱신 정보","required":true,"schema":{"$ref":"#/components/schemas/UpdateTokenDto"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTokenDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1"}}}}}}},"/register":{"get":{"tags":["View Controller"],"summary":"회원 가입 페이지 이동","description":"/register 요청이 왔을 때 회원 가입 페이지로 이동한다.","operationId":"getSubscribe","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/redirect":{"get":{"tags":["View Controller"],"summary":"redirect","description":"redirect 요청이 왔을 때 callback url 로 redirect 한다.","operationId":"redirect","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/logout":{"get":{"tags":["View Controller"],"summary":"로그아웃","description":"로그아웃 요청이 왔을 때 로그아웃 처리를 한다.Domain 의 모든 Cookie 를 삭제하고 login 페이지로 redirect 한다.","operationId":"logout","parameters":[{"name":"callback","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/login":{"get":{"tags":["View Controller"],"summary":"/login 로그인 페이지 요청 처리","description":"/login 요청이 왔을 때 JWT Token 을 검사하여 valid 하면 callback url 에 따라 callback 으로 token 과 함께 redirect 혹은 main 페이지로 redirect 한다.token 이 없거나 invalid 하면 login 페이지로 redirect 한다. 이때 callback 은 query parameter 로 전달한다.","operationId":"getLogin","parameters":[{"name":"callback","in":"query","description":"로그인 후 redirect 할 url","required":false,"schema":{"type":"string"}},{"name":"utsec","in":"query","description":"token 의 expiration time 을 연장할 시간(초)","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"portal_jwt","in":"cookie","required":false,"schema":{"type":"string"}},{"name":"jwtToken","in":"query","description":"jwt token","schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/v1/user/{accountName}":{"get":{"tags":["User"],"summary":"사용자 조회","description":"사용자 계정명(user id)으로 사용자를 조회한다","operationId":"getUserByAccountName","parameters":[{"name":"accountName","in":"path","description":"사용자 계정명(user id)","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1UserDto"}}}}}},"delete":{"tags":["User"],"summary":"사용자 삭제","description":"사용자 계정명(user id)으로 사용자를 삭제한다","operationId":"deleteUserByAccountName","parameters":[{"name":"accountName","in":"path","description":"사용자 계정명(user id)","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1"}}}}}}},"/api/v1/system/auth":{"get":{"tags":["System"],"summary":"시스템 권한 목록 조회","description":"시스템 권한 목록을 조회한다","operationId":"getSystemAuths","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1ListSystemAuthDto"}}}}}}},"/api/v1/debug/test":{"get":{"tags":["debug-controller"],"operationId":"getTest","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1"}}}}}}},"/api/v1/acp/service":{"get":{"tags":["acp-controller"],"operationId":"getAcpServiceList","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseV1ListAcpServiceDto"}}}}}}},"/":{"get":{"tags":["View Controller"],"summary":"메인 페이지 이동","description":"/ 요청이 왔을 때 메인 페이지로 이동한다.","operationId":"getMain_1","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}}},"components":{"schemas":{"System":{"type":"object","properties":{"systemId":{"type":"integer","description":"시스템 ID","format":"int64"},"systemName":{"type":"string","description":"시스템 이름"},"baseUrl":{"type":"string","description":"시스템 페이지로 접근할 수 있는 기본 URL (jwt 를 query string 으로 붙여 전달)"},"authType":{"type":"string","description":"시스템 인증 방식","enum":["BASIC","OAUTH2","JWT"]},"jwtCookieKey":{"type":"string","description":"JWT 쿠키 키"},"systemAuthList":{"type":"array","description":"시스템 권한 목록","items":{"$ref":"#/components/schemas/SystemAuth"}}},"description":"시스템 정보"},"SystemAuth":{"type":"object","properties":{"authId":{"type":"integer","format":"int64"},"authName":{"type":"string"},"system":{"$ref":"#/components/schemas/System"}},"description":"역할이 가지고 있는 시스템 권한 목록"},"SystemDto":{"type":"object","properties":{"systemId":{"type":"integer","description":"시스템 ID(자동생성)","format":"int64"},"systemName":{"type":"string","description":"시스템 이름"},"baseUrl":{"type":"string","description":"메인화면 좌측 메뉴에 link 될 시스템 URL"},"authType":{"type":"string","description":"시스템 인증 타입","enum":["BASIC","OAUTH2","JWT"]},"jwtCookieKey":{"type":"string","description":"JWT 쿠키 키","deprecated":true},"systemAuthList":{"type":"array","description":"시스템이 제공하는 권한들의 목록","items":{"$ref":"#/components/schemas/SystemAuth"}}},"description":"시스템 정보"},"ApiResponseV1SystemDto":{"type":"object","properties":{"body":{"$ref":"#/components/schemas/SystemDto"},"version":{"type":"string"}}},"SystemAuthDto":{"type":"object","properties":{"authId":{"type":"integer","description":"권한 ID","format":"int64"},"authName":{"type":"string","description":"권한 이름 (시스템 별 고유한 권한 이름)"},"systemId":{"$ref":"#/components/schemas/System"}},"description":"시스템 권한 정보 DTO"},"ApiResponseV1SystemAuthDto":{"type":"object","properties":{"body":{"$ref":"#/components/schemas/SystemAuthDto"},"version":{"type":"string"}}},"RoleDto":{"required":["roleName"],"type":"object","properties":{"roleId":{"type":"integer","description":"역할 ID","format":"int64"},"roleName":{"type":"string","description":"역할 이름"},"systemAuthIdSet":{"uniqueItems":true,"type":"array","description":"역할이 가지고 있는 시스템 권한 ID 목록","items":{"type":"integer","description":"역할이 가지고 있는 시스템 권한 ID 목록","format":"int64"}},"systemAuthList":{"type":"array","description":"역할이 가지고 있는 시스템 권한 목록","items":{"$ref":"#/components/schemas/SystemAuth"}}},"description":"역할 정보 DTO"},"ApiResponseV1RoleDto":{"type":"object","properties":{"body":{"$ref":"#/components/schemas/RoleDto"},"version":{"type":"string"}}},"OrgDto":{"type":"object","properties":{"orgId":{"type":"integer","description":"조직 ID","format":"int64"},"orgName":{"type":"string","description":"조직(ACP Service) 이름"},"serviceId":{"type":"string","description":"ACP 의 서비스 ID"},"partnerId":{"type":"integer","description":"봇빌더용 파트너 ID","format":"int64"},"userList":{"type":"array","description":"조직(ACP 서비스)에 속한 사용자 목록","items":{"$ref":"#/components/schemas/User"}}},"description":"조직(ACP 서비스) 정보"},"User":{"type":"object","properties":{"userId":{"type":"integer","description":"사용자 ID (자동생성된 내부 Long 값)","format":"int64"},"accountName":{"type":"string","description":"사용자 계정명 (user id)"},"userName":{"type":"string","description":"사용자 이름 (홍길동)"},"phoneNum":{"type":"string","description":"사용자 전화번호 (010-1234-5678)"}},"description":"사용자 정보"},"ApiResponseV1OrgDto":{"type":"object","properties":{"body":{"$ref":"#/components/schemas/OrgDto"},"version":{"type":"string"}}},"ApiResponseV1ListOrgDto":{"type":"object","properties":{"body":{"type":"array","items":{"$ref":"#/components/schemas/OrgDto"}},"version":{"type":"string"}}},"UserDto":{"type":"object","properties":{"userId":{"type":"integer","description":"사용자 ID","format":"int64"},"accountName":{"type":"string","description":"사용자 계정명 (user id)"},"userName":{"type":"string","description":"사용자 이름 (홍길동)"},"phoneNum":{"type":"string","description":"사용자 전화번호 (010-1234-5678)"},"passwordHash":{"type":"string","description":"사용자 비밀번호"},"serviceId":{"type":"string","description":"서비스 ID"},"acpAppKey":{"type":"string","description":"ACP App Key"},"orgId":{"type":"integer","description":"조직 ID(자동생성)","format":"int64"},"orgName":{"$ref":"#/components/schemas/OrgDto"},"roleId":{"type":"integer","description":"역할 ID(자동생성)","format":"int64"},"roleName":{"$ref":"#/components/schemas/RoleDto"}},"description":"사용자 정보"},"ApiResponseV1UserDto":{"type":"object","properties":{"body":{"$ref":"#/components/schemas/UserDto"},"version":{"type":"string"}}},"ApiResponseV1System":{"type":"object","properties":{"body":{"$ref":"#/components/schemas/System"},"version":{"type":"string"}}},"UpdateTokenDto":{"type":"object","properties":{"token":{"type":"string","description":"JWT 토큰"},"utsec":{"type":"integer","description":"추가연장 할 유효기간(초)","format":"int64"}},"description":"토큰 갱신 요청 정보"},"ApiResponseV1":{"type":"object","properties":{"body":{"type":"object"},"version":{"type":"string"}}},"ApiResponseV1ListUserDto":{"type":"object","properties":{"body":{"type":"array","items":{"$ref":"#/components/schemas/UserDto"}},"version":{"type":"string"}}},"ApiResponseV1ListSystemDto":{"type":"object","properties":{"body":{"type":"array","items":{"$ref":"#/components/schemas/SystemDto"}},"version":{"type":"string"}}},"ApiResponseV1ListSystemAuthDto":{"type":"object","properties":{"body":{"type":"array","items":{"$ref":"#/components/schemas/SystemAuthDto"}},"version":{"type":"string"}}},"ApiResponseV1ListRoleDto":{"type":"object","properties":{"body":{"type":"array","items":{"$ref":"#/components/schemas/RoleDto"}},"version":{"type":"string"}}},"AcpServiceDto":{"type":"object","properties":{"serviceId":{"type":"string"},"serviceName":{"type":"string"},"appKey":{"type":"string"},"partnerId":{"type":"integer","format":"int64"}},"description":"ACP 서비스(Portal 내 Org 개념) 정보"},"ApiResponseV1ListAcpServiceDto":{"type":"object","properties":{"body":{"type":"array","items":{"$ref":"#/components/schemas/AcpServiceDto"}},"version":{"type":"string"}}}}}}